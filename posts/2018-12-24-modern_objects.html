<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2018-12-24">

<title>Objects types and some useful R functions for beginners – Econometrics and Free Software</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../assets/img/favicon-32x32.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-3fe3df12cb322cd60d4f50ab5ce79ec8.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-587a49d30b524e4e9942e32b81edf2ae.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
@import url('https://fonts.bunny.net/css2?family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Serif:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap');
</style>
</head><body><table width="100%" height="100%" style="text-align: center;">
    <tbody><tr><td>
      <a href="https://b-rodrigues.github.io/blog/">Website</a> - 
      <a href="https://www.youtube.com/@brodriguesco">Youtube</a> - 
      <a href="https://b-rodrigues.github.io/blog/about.html">About</a> - 
      <a href="https://b-rodrigues.github.io/blog/talks.html">Talks</a> -
      <a href="https://b-rodrigues.github.io/blog/books.html">Books</a> - 
      <a href="https://b-rodrigues.github.io/blog/packages.html">Packages</a> -
      <a href="https://b-rodrigues.github.io/blog/index.xml">RSS</a>
    </td>
</tr></tbody></table>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">




<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Objects types and some useful R functions for beginners</h1>
  <div class="quarto-categories">
    <div class="quarto-category">R</div>
    <div class="quarto-category">data-science</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 24, 2018</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div style="text-align:center;">
<p>
<a href="https://www.youtube.com/watch?v=M-1nTwiHxic"> <img width="400" src="../assets/img/santa_sanders.jpg" title="The frydiest time of the year" height="auto"></a>
</p>
</div>
<script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<p>
This blog post is an excerpt of my ebook <em>Modern R with the tidyverse</em> that you can read for free <a href="https://b-rodrigues.github.io/modern_R/">here</a>. This is taken from Chapter 2, which explains the different R objects you can manipulate as well as some functions to get you started.
</p>
<section id="objects-types-and-useful-r-functions-to-get-started" class="level2">
<h2 class="anchored" data-anchor-id="objects-types-and-useful-r-functions-to-get-started">
Objects, types and useful R functions to get started
</h2>
<p>
All objects in R have a given <em>type</em>. You already know most of them, as these types are also used in mathematics. Integers, floating point numbers, or floats, matrices, etc, are all objects you are already familiar with. But R has other, maybe lesser known data types (that you can find in a lot of other programming languages) that you need to become familiar with. But first, we need to learn how to assign a value to a variable. This can be done in two ways:
</p>
<pre class="r"><code>a &lt;- 3</code></pre>
<p>
or
</p>
<pre class="r"><code>a = 3</code></pre>
<p>
in very practical terms, there is no difference between the two. I prefer using <code>&lt;-</code> for assigning values to variables and reserve <code>=</code> for passing arguments to functions, for example:
</p>
<pre class="r"><code>spam &lt;- mean(x = c(1,2,3))</code></pre>
<p>
I think this is less confusing than:
</p>
<pre class="r"><code>spam = mean(x = c(1,2,3))</code></pre>
<p>
but as I explained above you can use whatever you feel most comfortable with.
</p>
<section id="the-numeric-class" class="level3">
<h3 class="anchored" data-anchor-id="the-numeric-class">
The <code>numeric</code> class
</h3>
<p>
To define single numbers, you can do the following:
</p>
<pre class="r"><code>a &lt;- 3</code></pre>
<p>
The <code>class()</code> function allows you to check the class of an object:
</p>
<pre class="r"><code>class(a)</code></pre>
<pre><code>## [1] "numeric"</code></pre>
<p>
Decimals are defined with the character <code>.</code>:
</p>
<pre class="r"><code>a &lt;- 3.14</code></pre>
<p>
R also supports integers. If you find yourself in a situation where you explicitly need an integer and not a floating point number, you can use the following:
</p>
<pre class="r"><code>a  &lt;- as.integer(3)
class(a)</code></pre>
<pre><code>## [1] "integer"</code></pre>
<p>
The <code>as.integer()</code> function is very useful, because it converts its argument into an integer. There is a whole family of <code>as.*()</code> functions. To convert <code>a</code> into a floating point number again:
</p>
<pre class="r"><code>class(as.numeric(a))</code></pre>
<pre><code>## [1] "numeric"</code></pre>
<p>
There is also <code>is.numeric()</code> which tests whether a number is of the <code>numeric</code> class:
</p>
<pre class="r"><code>is.numeric(a)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>
These functions are very useful, there is one for any of the supported types in R. Later, we are going to learn about the <code>{purrr}</code> package, which is a very powerful package for functional programming. This package includes further such functions.
</p>
</section>
<section id="the-character-class" class="level3">
<h3 class="anchored" data-anchor-id="the-character-class">
The <code>character</code> class
</h3>
<p>
Use <code>” “</code> to define characters (called strings in other programming languages):
</p>
<pre class="r"><code>a &lt;- "this is a string"</code></pre>
<pre class="r"><code>class(a)</code></pre>
<pre><code>## [1] "character"</code></pre>
<p>
To convert something to a character you can use the <code>as.character()</code> function:
</p>
<pre class="r"><code>a &lt;- 4.392

class(a)</code></pre>
<pre><code>## [1] "numeric"</code></pre>
<pre class="r"><code>class(as.character(a))</code></pre>
<pre><code>## [1] "character"</code></pre>
<p>
It is also possible to convert a character to a numeric:
</p>
<pre class="r"><code>a &lt;- "4.392"

class(a)</code></pre>
<pre><code>## [1] "character"</code></pre>
<pre class="r"><code>class(as.numeric(a))</code></pre>
<pre><code>## [1] "numeric"</code></pre>
<p>
But this only works if it makes sense:
</p>
<pre class="r"><code>a &lt;- "this won't work, chief"

class(a)</code></pre>
<pre><code>## [1] "character"</code></pre>
<pre class="r"><code>as.numeric(a)</code></pre>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<p>
A very nice package to work with characters is <code>{stringr}</code>, which is also part of the <code>{tidyverse}</code>.
</p>
</section>
<section id="the-factor-class" class="level3">
<h3 class="anchored" data-anchor-id="the-factor-class">
The <code>factor</code> class
</h3>
<p>
Factors look like characters, but are very different. They are the representation of categorical variables. A <code>{tidyverse}</code> package to work with factors is <code>{forcats}</code>. You would rarely use factor variables outside of datasets, so for now, it is enough to know that this class exists. We are going to learn more about factor variables in Chapter 4, by using the <code>{forcats}</code> package.
</p>
</section>
<section id="the-date-class" class="level3">
<h3 class="anchored" data-anchor-id="the-date-class">
The <code>Date</code> class
</h3>
<p>
Dates also look like characters, but are very different too:
</p>
<pre class="r"><code>as.Date("2019/03/19")</code></pre>
<pre><code>## [1] "2019-03-19"</code></pre>
<pre class="r"><code>class(as.Date("2019/03/19"))</code></pre>
<pre><code>## [1] "Date"</code></pre>
<p>
Manipulating dates and time can be tricky, but thankfully there’s a <code>{tidyverse}</code> package for that, called <code>{lubridate}</code>. We are going to go over this package in Chapter 4.
</p>
</section>
<section id="the-logical-class" class="level3">
<h3 class="anchored" data-anchor-id="the-logical-class">
The <code>logical</code> class
</h3>
<p>
This class is the result of logical comparisons, for example, if you type:
</p>
<pre class="r"><code>4 &gt; 3</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>
R returns <code>TRUE</code>, which is an object of class <code>logical</code>:
</p>
<pre class="r"><code>k &lt;- 4 &gt; 3
class(k)</code></pre>
<pre><code>## [1] "logical"</code></pre>
<p>
In other programming languages, <code>logical</code>s are often called <code>bool</code>s. A <code>logical</code> variable can only have two values, either <code>TRUE</code> or <code>FALSE</code>. You can test the truthiness of a variable with <code>isTRUE()</code>:
</p>
<pre class="r"><code>k &lt;- 4 &gt; 3
isTRUE(k)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>
How can you test if a variable is false? There is not a <code>isFALSE()</code> function (at least not without having to load a package containing this function), but there is way to do it:
</p>
<pre class="r"><code>k &lt;- 4 &gt; 3
!isTRUE(k)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>
The <code>!</code> operator indicates negation, so the above expression could be translated as <em>is k not TRUE?</em>. There are other such operators, namely <code>&amp;, &amp;&amp;, |, ||</code>. <code>&amp;</code> means <em>and</em> and <code>|</code> stands for <em>or</em>. You might be wondering what the difference between <code>&amp;</code> and <code>&amp;&amp;</code> is? Or between <code>|</code> and <code>||</code>? <code>&amp;</code> and <code>|</code> work on vectors, doing pairwise comparisons:
</p>
<pre class="r"><code>one &lt;- c(TRUE, FALSE, TRUE, FALSE)
two &lt;- c(FALSE, TRUE, TRUE, TRUE)
one &amp; two</code></pre>
<pre><code>## [1] FALSE FALSE  TRUE FALSE</code></pre>
<p>
Compare this to the <code>&amp;&amp;</code> operator:
</p>
<pre class="r"><code>one &lt;- c(TRUE, FALSE, TRUE, FALSE)
two &lt;- c(FALSE, TRUE, TRUE, TRUE)
one &amp;&amp; two</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>
The <code>&amp;&amp;</code> and <code>||</code> operators only compare the first element of the vectors and stop as soon as a the return value can be safely determined. This is called short-circuiting. Consider the following:
</p>
<pre class="r"><code>one &lt;- c(TRUE, FALSE, TRUE, FALSE)
two &lt;- c(FALSE, TRUE, TRUE, TRUE)
three &lt;- c(TRUE, TRUE, FALSE, FALSE)
one &amp;&amp; two &amp;&amp; three</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>one || two || three</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>
The <code>||</code> operator stops as soon it evaluates to <code>TRUE</code> whereas the <code>&amp;&amp;</code> stops as soon as it evaluates to <code>FALSE</code>. Personally, I rarely use <code>||</code> or <code>&amp;&amp;</code> because I get confused. I find using <code>|</code> or <code>&amp;</code> in combination with the <code>all()</code> or <code>any()</code> functions much more useful:
</p>
<pre class="r"><code>one &lt;- c(TRUE, FALSE, TRUE, FALSE)
two &lt;- c(FALSE, TRUE, TRUE, TRUE)
any(one &amp; two)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>all(one &amp; two)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>
<code>any()</code> checks whether any of the vector’s elements are <code>TRUE</code> and <code>all()</code> checks if all elements of the vector are <code>TRUE</code>.
</p>
<p>
As a final note, you should know that is possible to use <code>T</code> for <code>TRUE</code> and <code>F</code> for <code>FALSE</code> but I would advise against doing this, because it is not very explicit.
</p>
</section>
<section id="vectors-and-matrices" class="level3">
<h3 class="anchored" data-anchor-id="vectors-and-matrices">
Vectors and matrices
</h3>
<p>
You can create a vector in different ways. But first of all, it is important to understand that a vector in most programming languages is nothing more than a list of things. These things can be numbers (either integers or floats), strings, or even other vectors. A vector in R can only contain elements of one single type. This is not the case for a list, which is much more flexible. We will talk about lists shortly, but let’s first focus on vectors and matrices.
</p>
<section id="the-c-function" class="level4">
<h4 class="anchored" data-anchor-id="the-c-function">
The <code>c()</code> function
</h4>
<p>
A very important function that allows you to build a vector is <code>c()</code>:
</p>
<pre class="r"><code>a &lt;- c(1,2,3,4,5)</code></pre>
<p>
This creates a vector with elements 1, 2, 3, 4, 5. If you check its class:
</p>
<pre class="r"><code>class(a)</code></pre>
<pre><code>## [1] "numeric"</code></pre>
<p>
This can be confusing: you where probably expecting a to be of class <em>vector</em> or something similar. This is not the case if you use <code>c()</code> to create the vector, because <code>c()</code> doesn’t build a vector in the mathematical sense, but a so-called atomic vector. Checking its dimension:
</p>
<pre class="r"><code>dim(a)</code></pre>
<pre><code>## NULL</code></pre>
<p>
returns <code>NULL</code> because an atomic vector doesn’t have a dimension. If you want to create a true vector, you need to use <code>cbind()</code> or <code>rbind()</code>.
</p>
<p>
But before continuing, be aware that atomic vectors can only contain elements of the same type:
</p>
<pre class="r"><code>c(1, 2, "3")</code></pre>
<pre><code>## [1] "1" "2" "3"</code></pre>
<p>
because “3” is a character, all the other values get implicitly converted to characters. You have to be very careful about this, and if you use atomic vectors in your programming, you have to make absolutely sure that no characters or logicals or whatever else are going to convert your atomic vector to something you were not expecting.
</p>
</section>
<section id="cbind-and-rbind" class="level4">
<h4 class="anchored" data-anchor-id="cbind-and-rbind">
<code>cbind()</code> and <code>rbind()</code>
</h4>
<p>
You can create a <em>true</em> vector with <code>cbind()</code>:
</p>
<pre class="r"><code>a &lt;- cbind(1, 2, 3, 4, 5)</code></pre>
<p>
Check its class now:
</p>
<pre class="r"><code>class(a)</code></pre>
<pre><code>## [1] "matrix"</code></pre>
<p>
This is exactly what we expected. Let’s check its dimension:
</p>
<pre class="r"><code>dim(a)</code></pre>
<pre><code>## [1] 1 5</code></pre>
<p>
This returns the dimension of <code>a</code> using the LICO notation (number of LInes first, the number of COlumns).
</p>
<p>
It is also possible to bind vectors together to create a matrix.
</p>
<pre class="r"><code>b &lt;- cbind(6,7,8,9,10)</code></pre>
<p>
Now let’s put vector <code>a</code> and <code>b</code> into a matrix called <code>matrix_c</code> using <code>rbind()</code>. <code>rbind()</code> functions the same way as <code>cbind()</code> but glues the vectors together by rows and not by columns.
</p>
<pre class="r"><code>matrix_c &lt;- rbind(a,b)
print(matrix_c)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    6    7    8    9   10</code></pre>
</section>
<section id="the-matrix-class" class="level4">
<h4 class="anchored" data-anchor-id="the-matrix-class">
The <code>matrix</code> class
</h4>
<p>
R also has support for matrices. For example, you can create a matrix of dimension (5,5) filled with 0’s with the <code>matrix()</code> function:
</p>
<pre class="r"><code>matrix_a &lt;- matrix(0, nrow = 5, ncol = 5)</code></pre>
<p>
If you want to create the following matrix:
</p>
<p>
<span class="math display">[ B = (
<span class="math display">\[\begin{array}{ccc}
2 &amp;amp; 4 &amp;amp; 3 \\
1 &amp;amp; 5 &amp;amp; 7
\end{array}\]</span>
) ]</span>
</p>
<p>
you would do it like this:
</p>
<pre class="r"><code>B &lt;- matrix(c(2, 4, 3, 1, 5, 7), nrow = 2, byrow = TRUE)</code></pre>
<p>
The option <code>byrow = TRUE</code> means that the rows of the matrix will be filled first.
</p>
<p>
You can access individual elements of <code>matrix_a</code> like so:
</p>
<pre class="r"><code>matrix_a[2, 3]</code></pre>
<pre><code>## [1] 0</code></pre>
<p>
and R returns its value, 0. We can assign a new value to this element if we want. Try:
</p>
<pre class="r"><code>matrix_a[2, 3] &lt;- 7</code></pre>
<p>
and now take a look at <code>matrix_a</code> again.
</p>
<pre class="r"><code>print(matrix_a)</code></pre>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    0    0    0    0    0
## [2,]    0    0    7    0    0
## [3,]    0    0    0    0    0
## [4,]    0    0    0    0    0
## [5,]    0    0    0    0    0</code></pre>
<p>
Recall our vector <code>b</code>:
</p>
<pre class="r"><code>b &lt;- cbind(6,7,8,9,10)</code></pre>
<p>
To access its third element, you can simply write:
</p>
<pre class="r"><code>b[3]</code></pre>
<pre><code>## [1] 8</code></pre>
<p>
I have heard many people praising R for being a matrix based language. Matrices are indeed useful, and statisticians are used to working with them. However, I very rarely use matrices in my day to day work, and prefer an approach based on data frames (which will be discussed below). This is because working with data frames makes it easier to use R’s advanced functional programming language capabilities, and this is where R really shines in my opinion. Working with matrices almost automatically implies using loops and all the iterative programming techniques, <em>à la Fortran</em>, which I personally believe are ill-suited for interactive statistical programming (as discussed in the introduction).
</p>
</section>
</section>
<section id="the-list-class" class="level3">
<h3 class="anchored" data-anchor-id="the-list-class">
The <code>list</code> class
</h3>
<p>
The <code>list</code> class is a very flexible class, and thus, very useful. You can put anything inside a list, such as numbers:
</p>
<pre class="r"><code>list1 &lt;- list(3, 2)</code></pre>
<p>
or other lists constructed with <code>c()</code>:
</p>
<pre class="r"><code>list2 &lt;- list(c(1, 2), c(3, 4))</code></pre>
<p>
you can also put objects of different classes in the same list:
</p>
<pre class="r"><code>list3 &lt;- list(3, c(1, 2), "lists are amazing!")</code></pre>
<p>
and of course create list of lists:
</p>
<pre class="r"><code>my_lists &lt;- list(list1, list2, list3)</code></pre>
<p>
To check the contents of a list, you can use the structure function <code>str()</code>:
</p>
<pre class="r"><code>str(my_lists)</code></pre>
<pre><code>## List of 3
##  $ :List of 2
##   ..$ : num 3
##   ..$ : num 2
##  $ :List of 2
##   ..$ : num [1:2] 1 2
##   ..$ : num [1:2] 3 4
##  $ :List of 3
##   ..$ : num 3
##   ..$ : num [1:2] 1 2
##   ..$ : chr "lists are amazing!"</code></pre>
<p>
or you can use RStudio’s <em>Environment</em> pane:
</p>
<div style="text-align: center;">
<img src="../assets/img/rstudio_environment_list.gif" width="80%" height="auto">
</div>
<p>
You can also create named lists:
</p>
<pre class="r"><code>list4 &lt;- list("a" = 2, "b" = 8, "c" = "this is a named list")</code></pre>
<p>
and you can access the elements in two ways:
</p>
<pre class="r"><code>list4[[1]]</code></pre>
<pre><code>## [1] 2</code></pre>
<p>
or, for named lists:
</p>
<pre class="r"><code>list4$c</code></pre>
<pre><code>## [1] "this is a named list"</code></pre>
<p>
Lists are used extensively because they are so flexible. You can build lists of datasets and apply functions to all the datasets at once, build lists of models, lists of plots, etc… In the later chapters we are going to learn all about them. Lists are central objects in a functional programming workflow for interactive statistical analysis.
</p>
</section>
<section id="the-data.frame-and-tibble-classes" class="level3">
<h3 class="anchored" data-anchor-id="the-data.frame-and-tibble-classes">
The <code>data.frame</code> and <code>tibble</code> classes
</h3>
<p>
In the next chapter we are going to learn how to import datasets into R. Once you import data, the resulting object is either a <code>data.frame</code> or a <code>tibble</code> depending on which package you used to import the data. <code>tibble</code>s extend <code>data.frame</code>s so if you know about <code>data.frame</code> objects already, working with <code>tibble</code>s will be very easy. <code>tibble</code>s have a better <code>print()</code> method, and some other niceties.
</p>
<p>
However, I want to stress that these objects are central to R and are thus very important; they are actually special cases of lists, discussed above. There are different ways to print a <code>data.frame</code> or a <code>tibble</code> if you wish to inspect it. You can use <code>View(my_data)</code> to show the <code>my_data</code> <code>data.frame</code> in the <em>View</em> pane of RStudio:
</p>
<div style="text-align: center;">
<img src="../assets/img/rstudio_view_data.gif" width="80%" height="auto">
</div>
<p>
You can also use the <code>str()</code> function:
</p>
<pre class="r"><code>str(my_data)</code></pre>
<p>
And if you need to access an individual column, you can use the <code>$</code> sign, same as for a list:
</p>
<pre class="r"><code>my_data$col1</code></pre>
</section>
<section id="formulas" class="level3">
<h3 class="anchored" data-anchor-id="formulas">
Formulas
</h3>
<p>
We will learn more about formulas later, but because it is an important object, it is useful if you already know about them early on. A formula is defined in the following way:
</p>
<pre class="r"><code>my_formula &lt;- ~x

class(my_formula)</code></pre>
<pre><code>## [1] "formula"</code></pre>
<p>
Formula objects are defined using the <code>~</code> symbol. Formulas are useful to define statistical models, for example for a linear regression:
</p>
<pre class="r"><code>lm(y ~ x)</code></pre>
<p>
or also to define anonymous functions, but more on this later.
</p>
</section>
</section>
<section id="models" class="level2">
<h2 class="anchored" data-anchor-id="models">
Models
</h2>
<p>
A statistical model is an object like any other in R:
</p>
<pre class="r"><code>data(mtcars)

my_model &lt;- lm(mpg ~ hp, mtcars)

class(my_model)</code></pre>
<pre><code>## [1] "lm"</code></pre>
<p>
<code>my_model</code> is an object of class <code>lm</code>. You can apply different functions to a model object:
</p>
<pre class="r"><code>summary(my_model)</code></pre>
<pre><code>## 
## Call:
## lm(formula = mpg ~ hp, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.7121 -2.1122 -0.8854  1.5819  8.2360 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 30.09886    1.63392  18.421  &lt; 2e-16 ***
## hp          -0.06823    0.01012  -6.742 1.79e-07 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.863 on 30 degrees of freedom
## Multiple R-squared:  0.6024, Adjusted R-squared:  0.5892 
## F-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07</code></pre>
<p>
This class will be explored in later chapters.
</p>
<section id="null-na-and-nan" class="level3">
<h3 class="anchored" data-anchor-id="null-na-and-nan">
NULL, NA and NaN
</h3>
<p>
The <code>NULL</code>, <code>NA</code> and <code>NaN</code> classes are pretty special. <code>NULL</code> is returned when the result of function is undetermined. For example, consider <code>list4</code>:
</p>
<pre class="r"><code>list4</code></pre>
<pre><code>## $a
## [1] 2
## 
## $b
## [1] 8
## 
## $c
## [1] "this is a named list"</code></pre>
<p>
if you try to access an element that does not exist, such as <code>d</code>, you will get <code>NULL</code> back:
</p>
<pre class="r"><code>list4$d</code></pre>
<pre><code>## NULL</code></pre>
<p>
<code>NaN</code> means “Not a Number” and is returned when a function return something that is not a number:
</p>
<pre class="r"><code>sqrt(-1)</code></pre>
<pre><code>## Warning in sqrt(-1): NaNs produced</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>
or:
</p>
<pre class="r"><code>0/0</code></pre>
<pre><code>## [1] NaN</code></pre>
<p>
Basically, numbers that cannot be represented as floating point numbers are <code>NaN</code>.
</p>
<p>
Finally, there’s <code>NA</code> which is closely related to <code>NaN</code> but is used for missing values. <code>NA</code> stands for <code>Not Available</code>. There are several types of <code>NA</code>s:
</p>
<ul>
<li>
<code>NA_integer_</code>
</li>
<li>
<code>NA_real_</code>
</li>
<li>
<code>NA_complex_</code>
</li>
<li>
<code>NA_character_</code>
</li>
</ul>
<p>
but these are in principle only used when you need to program your own functions and need to explicitly test for the missingness of, say, a character value.
</p>
<p>
To test whether a value is <code>NA</code>, use the <code>is.na()</code> function.
</p>
</section>
<section id="useful-functions-to-get-you-started" class="level3">
<h3 class="anchored" data-anchor-id="useful-functions-to-get-you-started">
Useful functions to get you started
</h3>
<p>
This section will list several basic R functions that are very useful and should be part of your toolbox.
</p>
<section id="sequences" class="level4">
<h4 class="anchored" data-anchor-id="sequences">
Sequences
</h4>
<p>
There are several functions that create sequences, <code>seq()</code>, <code>seq_along()</code> and <code>rep()</code>. <code>rep()</code> is easy enough:
</p>
<pre class="r"><code>rep(1, 10)</code></pre>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 1</code></pre>
<p>
This simply repeats <code>1</code> 10 times. You can repeat other objects too:
</p>
<pre class="r"><code>rep("HAHA", 10)</code></pre>
<pre><code>##  [1] "HAHA" "HAHA" "HAHA" "HAHA" "HAHA" "HAHA" "HAHA" "HAHA" "HAHA" "HAHA"</code></pre>
<p>
To create a sequence, things are not as straightforward. There is <code>seq()</code>:
</p>
<pre class="r"><code>seq(1, 10)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<pre class="r"><code>seq(70, 80)</code></pre>
<pre><code>##  [1] 70 71 72 73 74 75 76 77 78 79 80</code></pre>
<p>
It is also possible to provide a <code>by</code> argument:
</p>
<pre class="r"><code>seq(1, 10, by = 2)</code></pre>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<p>
<code>seq_along()</code> behaves similarly, but returns the length of the object passed to it. So if you pass <code>list4</code> to <code>seq_along()</code>, it will return a sequence from 1 to 3:
</p>
<pre class="r"><code>seq_along(list4)</code></pre>
<pre><code>## [1] 1 2 3</code></pre>
<p>
which is also true for <code>seq()</code> actually:
</p>
<pre class="r"><code>seq(list4)</code></pre>
<pre><code>## [1] 1 2 3</code></pre>
<p>
but these two functions behave differently for arguments of length equal to 1:
</p>
<pre class="r"><code>seq(10)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<pre class="r"><code>seq_along(10)</code></pre>
<pre><code>## [1] 1</code></pre>
<p>
So be quite careful about that. I would advise you do not use <code>seq()</code>, but only <code>seq_along()</code> and <code>seq_len()</code>. <code>seq_len()</code> only takes arguments of length 1:
</p>
<pre class="r"><code>seq_len(10)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<pre class="r"><code>seq_along(10)</code></pre>
<pre><code>## [1] 1</code></pre>
<p>
The problem with <code>seq()</code> is that it is unpredictable; depending on its input, the output will either be an integer or a sequence. When programming, it is better to have function that are stricter and fail when confronted to special cases, instead of returning some result. This is a bit of a recurrent issue with R, and the functions from the <code>{tidyverse}</code> mitigate this issue by being stricter than their base R counterparts. For example, consider the <code>ifelse()</code> function from base R:
</p>
<pre class="r"><code>ifelse(3 &gt; 5, 1, "this is false")</code></pre>
<pre><code>## [1] "this is false"</code></pre>
<p>
and compare it to <code>{dplyr}</code>’s implementation, <code>if_else()</code>:
</p>
<pre class="r"><code>if_else(3 &gt; 5, 1, "this is false")
Error: `false` must be type double, not character
Call `rlang::last_error()` to see a backtrace</code></pre>
<p>
<code>if_else()</code> fails because the return value when <code>FALSE</code> is not a double (a real number) but a character. This might seem unnecessarily strict, but at least it is predictable. This makes debugging easier when used inside functions. In Chapter 8 we are going to learn how to write our own functions, and being strict makes programming easier.
</p>
</section>
<section id="basic-string-manipulation" class="level4">
<h4 class="anchored" data-anchor-id="basic-string-manipulation">
Basic string manipulation
</h4>
<p>
For now, we have not closely studied <code>character</code> objects, we only learned how to define them. Later, in Chapter 5 we will learn about the <code>{stringr}</code> package which provides useful function to work with strings. However, there are several base R functions that are very useful that you might want to know nonetheless, such as <code>paste()</code> and <code>paste0()</code>:
</p>
<pre class="r"><code>paste("Hello", "amigo")</code></pre>
<pre><code>## [1] "Hello amigo"</code></pre>
<p>
but you can also change the separator if needed:
</p>
<pre class="r"><code>paste("Hello", "amigo", sep = "--")</code></pre>
<pre><code>## [1] "Hello--amigo"</code></pre>
<p>
<code>paste0()</code> is the same as <code>paste()</code> but does not have any <code>sep</code> argument:
</p>
<pre class="r"><code>paste0("Hello", "amigo")</code></pre>
<pre><code>## [1] "Helloamigo"</code></pre>
<p>
If you provide a vector of characters, you can also use the <code>collapse</code> argument, which places whatever you provide for <code>collapse</code> between the characters of the vector:
</p>
<pre class="r"><code>paste0(c("Joseph", "Mary", "Jesus"), collapse = ", and ")</code></pre>
<pre><code>## [1] "Joseph, and Mary, and Jesus"</code></pre>
<p>
To change the case of characters, you can use <code>toupper()</code> and <code>tolower()</code>:
</p>
<pre class="r"><code>tolower("HAHAHAHAH")</code></pre>
<pre><code>## [1] "hahahahah"</code></pre>
<pre class="r"><code>toupper("hueuehuehuheuhe")</code></pre>
<pre><code>## [1] "HUEUEHUEHUHEUHE"</code></pre>
</section>
<section id="mathematical-functions" class="level4">
<h4 class="anchored" data-anchor-id="mathematical-functions">
Mathematical functions
</h4>
<p>
Finally, there are the classical mathematical functions that you know and love:
</p>
<ul>
<li>
<code>sqrt()</code>
</li>
<li>
<code>exp()</code>
</li>
<li>
<code>log()</code>
</li>
<li>
<code>abs()</code>
</li>
<li>
<code>sin()</code>, <code>cos()</code>, <code>tan()</code>, and others
</li>
<li>
<code>sum()</code>, <code>cumsum()</code>, <code>prod()</code>, <code>cumprod()</code>
</li>
<li>
<code>max()</code>, <code>min()</code>
</li>
</ul>
<p>
and many others…
</p>
</section>
</section>
</section>



</main> <!-- /main -->
<hr style="border: 1px solid #ccc; margin: 20px 0;">
<footer>
If you find the content in this blog useful, you might want to follow
me on <a href="https://fosstodon.org/@brodriguesco">Mastodon</a> or <a href="https://www.twitter.com/brodriguesco">twitter</a> for blog post updates or
<a href="https://www.buymeacoffee.com/brodriguesco">buy me an espresso</a> or <a href="https://www.paypal.me/brodriguesco">paypal.me</a>, or buy my <a href="../books.html">ebooks</a>.
You can also watch my videos on <a href="https://www.youtube.com/c/BrunoRodrigues1988/">youtube</a>.
So much content for you to consoom!
<p></p>
<style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#ffffff !important;background-color:#272b30 !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 1px 9px !important;font-size: 22px !important;letter-spacing:0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#82518c !important;}</style>
<p>
<link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/brodriguesco"><img src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg" alt="Buy me an Espresso"><span style="margin-left:5px">Buy me an Espresso</span></a>
</p>
  <div class="row">
    <div class="col-lg-12">
        <p>© <span id="year"></span>, content by Bruno Rodrigues, unless otherwise stated, every content of this blog is licensed under the <a href="http://www.wtfpl.net/txt/copying/" rel="nofollow">WTFPL</a>.</p>
        <p>Built with <a href="https://quarto.org/">Quarto</a> and <a href="https://nixos.org/explore/">Nix</a>, hosted on <a href="https://pages.github.com/">GitHub Pages</a>.</p>
      <p><a href="../index.html">Back to main page.</a></p>
    </div>
  </div>
</footer>
<script>
 document.getElementById('year').textContent = new Date().getFullYear();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/b-rodrigues\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>